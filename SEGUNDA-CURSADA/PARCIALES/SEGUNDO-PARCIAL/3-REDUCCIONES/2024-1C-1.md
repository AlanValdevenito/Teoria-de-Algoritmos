# Enunciado

Coty cumplió años ayer y está organizando su festejo. En dicho festejo, va a dar unos regalos. Son regalos geniales, que van a dar que hablar luego del festejo. Eso es justamente lo que desea ella: que todos aquellos invitados que se conozcan entre sí, luego de terminado el evento hablen del regalo que recibió uno, o bien el otro. ¿El problema? Coty está invitando a n personas, pero no tiene presupuesto para comprar n regalos, sino tan sólo k.

El problema del cumpleaños de Coty puede enunciarse como: 

**Dada la lista de n invitados al cumpleaños de Coty, un número k, y conociendo quién se conocen con quién (ej: una lista con los pares de conocidos), ¿existe una forma de asignar a lo sumo k personas para dar los regalos, de tal forma que todos los invitados, al hablar luego con quienes se conozcan, puedan hablar del regalo que obtuvo uno o bien el otro?**

Demostrar que el problema del cumpleaños de Coty es un problema NP-Completo.

Elegimos el problema de Vertex Cover para realizar la demostracion.

El problema de Vertex Cover puede enunciarse como: 

**Dado un grafo y un entero k, ¿existe un subconjunto de vertices de tamaño a lo sumo k que cubra todas las aristas?**

# Demostracion

Para demostrar que el problema de Cumpleaños de Coty es un problema NP-Completo debemos:
- Demostrar que el problema se encuentra en NP
- Reducir el problema de Vertex Cover al problema de Cumpleaños de Coty: Vertex Cover $\leq_P$ Cumpleaños de Coty

Nota: Para la segunda demostracion es importante demostrar que nuestra reduccion es correcta demostrando la doble implicacion.

La segunda demostracion nos indica que el problema de Cumpleaños de Coty es al menos tan dificil de resolver como el problema de Vertex Cover. Esto significa que resolver el problema de Vertex Cover puede ser transformado en resolver el problema de Cumpleaños de Coty.

## Demostracion I: El problema se encuentra en NP

Para que el problema se encuentre en NP, debe haber un verificador eficiente.

En otras palabras, debe haber un verificador que ejecute en tiempo polinomial.

Verificador: Recibe una instancia del problema y una solucion.

```py
def verificador(invitados, conocidos, k, solucion):
    
    # Validamos que la solucion tenga a lo sumo k invitados
    if len(solucion) > k: return False

    invitados = set(invitados)

    # Validamos que los invitados de la solucion sean realmente invitados
    for invitado in solucion:
        if invitado not in invitados: return False

    solucion = set(solucion)

    # Validamos que de los pares de conocidos al menos uno se encuentre en la solucion para que puedan hablar del regalo que obtuvo uno o bien el otro
    for par in conocidos:
        inv1, inv2 = par
        if (inv1 not in solucion) ad (inv2 not in solucion): return False

    return True
```

Complejidad: La complejidad resulta ser O(k + c) donde k es la cantidad de invitados que reciben regalos y c es la cantidad de pares conocidos
- Validar que la solucion tenga a lo sumo k invitados tiene una complejidad de O(1)
- Validar que los invitados de la solucion sean realmente invitados tiene una complejidad de O(k) donde k es la cantidad de invitados que reciben regalos
- Validar que de los pares de conocidos al menos uno se encuentre en la solucion tiene una complejidad de O(c) donde c es la cantidad de pares conocidos

Luego, se ejecuta en tiempo polinomial, lo cual quiere decir que el problema se encuentra en NP.

## Demostracion II: Reduccion de un problema NP-Completo

Debemos demostrar que Vertex Cover $\leq_P$ Cumpleaños de Coty.

### Reduccion planteada

¿Podemos resolver el problema de Vertex Cover utilizando la solucion del problema de Cumpleaños de Coty?.

Vamos a utilizar una caja negra que resuelve el problema de Cumpleaños de Coty para resolver el problema de Vertex Cover.

El problema de Vertex Cover recibe un grafo G y un valor $k'$.

Transformacion del problema: Transformamos la entrada del problema de Vertex Cover en una entrada del problema Cumpleaños de Coty
- Transformamos cada vertice $V_i$ del grafo G en un invitado $I_i$
- Transformamos cada arista $(V_i, V_j)$ en un par de invitados que se conocen $(I_i, I_j)$
- El valor de $k'$ coincide con el valor de $k$

Esta transformacion requiere una cantidad de pasos polinomiales.

A continuacion, para demostrar que la reduccion es correcta, debemos demostrar que:

Hay solucion de Vertex Cover de tamaño a lo sumo k', si y solo si, hay solucion para el problema de Cumpleaños de Coty de tamaño a lo sumo k.

Para demostrar ambas implicaciones tenemos dos opciones:
- Metodo directo, asumiendo para cada una que la hipotesis es cierta.
- Metodo por absurdo.

### Si hay VC, entonces hay CC

Hipotesis: Hay solucion de Vertex Cover de tamaño a lo sumo k'
Tesis: Hay solucion para el problema de Cumpleaños de Coty de tamaño a lo sumo k

Dada nuestra hipotesis, existe un subconjunto de vertices tal que cubre todas las aristas. 

Si cada vertice del subconjunto de Vertex Cover es una persona que recibio un regalo, podemos afirmar que dado que se cubren todas las aristas, tambien se cubren a todos los invitados de tal forma que al menos uno de los dos tenga asignado un regalo.

Como las relaciones de conocidos fueron generadas a partir de las aristas del grafo, no puede suceder que haya un par de invitados conocidos donde ninguno tenga un regalo. Si esto no fuera asi, implicaria que hay una arista en el grafo G que no se encuentra cubierta, lo cual es un absurdo debido a nuestra hipotesis.

Luego, si hay solucion de Vertex Cover de tamaño a lo sumo $k'$, entonces hay solucion para el problema de Cumpleaños de Coty de tamaño a lo sumo $k$.

### Si hay CC, entonces hay VC

Hipotesis: Hay solucion para el problema de Cumpleaños de Coty de tamaño a lo sumo k
Tesis: Hay solucion de Vertex Cover de tamaño a lo sumo k'

Nota: No estamos cualquier instancia posible de X, sino una que resulta de la reduccion planteada.

Dada nuestra hipotesis, existe una asignacion de regalos de tal forma que todos los invitados, al hablar luego con quienes se conozcan, pueden hablar del regalo que obtuvo uno o bien el otro.

Teniendo en cuenta nuestra transformacion, cada par de invitados que se conocen $(I_i, I_j)$ es una arista $(V_i, V_j)$ del grafo G.

Como cada relacion de conocidos se encuentra cubierta por uno de los dos invitados (ya que se le asigno un regalo) entonces en el grafo G tenemos que cada arista se encuentra cubierta por uno de los dos vertices que conectan dicha arista.

Luego, si hay solucion para el problema de Cumpleaños de Coty de tamaño a lo sumo $k$, entonces hay solucion de Vertex Cover de tamaño a lo sumo $k'$.

# Conclusion

Habiendo demostrado que la reduccion es correcta, queda demostrado tambien que el problema de Cumpleaños de Coty es un problema NP-Completo.