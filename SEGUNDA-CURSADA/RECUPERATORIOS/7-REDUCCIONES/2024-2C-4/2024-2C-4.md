# Enunciado 

Grace, docente de un primer grado de un colegio primario, tiene como tarea armar la fila del acto del 9 de julio. Como no quiere que los chicos se distraigan, quiere que cada alumno quede entre dos personas de las cuales no es amigo. 

El problema de la fila del primario (en versión de problema de decisión) puede formularse como: “Dado un listado de alumnos, y un diccionario que indica qué alumnos son amigos de cuál, ¿existe una forma de poner en fila a los alumnos para que no haya ningún par de amigos consecutivos?”.

Demostrar que El problema de la fila del primario es un problema NP-Completo. 

Para esto, recomendamos recordar que el problema de Camino Hamiltoniano es un problema NP-Completo. También, recomendamos recordar cómo fue que demostramos en clase que K-Clique es un problema NP-Completo (con la ayuda de Independent Set).

El problema de Camino Hamiltoniano es el siguiente: Dado un grafo, ¿existe un camino que visite cada vertice de G exactamente una vez?.

# Demostracion

Notacion:
- Fila del primario: FP
- Camino Hamiltoniano: CH

Para demostrar que el problema de FP es un problema NP-Completo debemos:
- Demostrar que el problema se encuentra en NP
- Reducir el problema de CH al problema de FP: CH $\leq_P$ FP

Nota: Para la segunda demostracion es importante demostrar que nuestra reduccion es correcta demostrando la doble implicacion.

La segunda demostracion nos indica que el problema de FP es al menos tan dificil de resolver como el problema de CM. Esto significa que resolver el problema de CH puede ser transformado en resolver el problema de FP.

## Demostracion I: El problema se encuentra en NP

Para que el problema se encuentre en NP, debe haber un verificador eficiente.

En otras palabras, debe haber un verificador que ejecute en tiempo polinomial.

Verificador: Recibe una instancia del problema y una solucion.

```py
def verificador(alumnos, amigos, fila):
    alumnos = set(alumnos)
    fila = set(fila)

    # Validamos que la cantidad de alumnos en la fila sea igual a la cantidad total de alumnos
    if len(alumnos) != len(fila): return False

    # Validamos que los alumnos en la fila sean realmente alumnos
    for alumno in fila:
        if alumno not in alumnos: return False

    amigos = {alumno: set(a) for alumno, a in amigos.items()}

    # Validamos que no haya ningún par de amigos consecutivos
    for i in range(1, len(fila)):
        a1 = fila[i-1]
        a2 = fila[i]

        if a1 in amigos[a2]: return False

    return True
```

Complejidad: La complejidad resulta ser O(n) con n la cantidad de alumnos
- Convertir la lista de alumnos y la lista de fila a un conjunto (set) tiene una complejidad de O(n) con n la cantidad de alumnos
- Validar que la cantidad de alumnos en la fila sea igual a la cantidad total de alumnos tiene una complejidad de O(1)
- Validar que los alumnos en la fila sean realmente alumnos tiene una complejidad de O(n) con n la cantidad de alumnos
- Validar que no haya ningún par de amigos consecutivos tiene una complejidad de O(n) con n la cantidad de alumnos

Luego, se ejecuta en tiempo polinomial, lo cual quiere decir que el problema se encuentra en NP.

## Demostracion II: Reduccion de un problema NP-Completo

Debemos demostrar que Y $\leq_P$ X.

### Reduccion planteada

¿Podemos resolver el problema de Y utilizando la solucion del problema de X?.

Vamos a utilizar una caja negra que resuelve el problema de X para resolver el problema de Y.

El problema de Y recibe...

Transformacion del problema: Transformamos la entrada del problema de Y en una entrada del problema X
- ...

Esta transformacion requiere una cantidad de pasos polinomiales.

A continuacion, para demostrar que la reduccion es correcta, debemos demostrar que:

Hay solucion de Y, si y solo si, hay solucion para el problema de X.

Para demostrar ambas implicaciones tenemos dos opciones:
- Metodo directo, asumiendo para cada una que la hipotesis es cierta.
- Metodo por absurdo.

### Si hay Y, entonces hay X

Hipotesis: ...
Tesis: ...

Nota: No estamos cualquier instancia posible de X, sino una que resulta de la reduccion planteada.

### Si hay X, entonces hay Y

Hipotesis: ...
Tesis: ...

Nota: No estamos cualquier instancia posible de X, sino una que resulta de la reduccion planteada.

# Conclusion

Habiendo demostrado que la reduccion es correcta, queda demostrado tambien que el problema de X es un problema NP-Completo.